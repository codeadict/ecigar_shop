(function(f,c){var d=function(b,a){b&&cancelEvent(b);a=a||{};var e=a.id?{type:"get_listing_rating",listing_id:a.id}:{type:"get_comp_rating"};c.when(FTB.lazy("smart_rating"),c.ajax({url:"/ajax_smart_rating",type:"GET",dataType:"json",data:e})).done(function(c,b){_.isFunction(a.cb)?a.cb(b[0]):d.init(b[0])})};d.init=c.noop;window.show_smart_rating=d})(document,jQuery);
;
d3=function(){function sb(a){return null!=a&&!isNaN(a)}function Ec(a){return a.length}function T(){}function I(){}function tb(){}function Fc(a){function b(){for(var b,d=c,l=-1,h=d.length;++l<h;)(b=d[l].on)&&b.apply(this,arguments);return a}var c=[],d=new I;return b.on=function(b,f){var l,h=d.get(b);return 2>arguments.length?h&&h.on:(h&&(h.on=null,c=c.slice(0,l=c.indexOf(h)).concat(c.slice(l+1)),d.remove(b)),f&&c.push(d.set(b,{on:f})),a)},b}function ub(){for(var a,b=g.event;a=b.sourceEvent;)b=a;return b}
function vb(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>za&&(A.scrollX||A.scrollY)){var c=g.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();za=!(e.f||e.e);c.remove()}return za?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-
a.clientTop]}function Gc(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function wb(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=xb.length;d>c;++c){var e=xb[c]+b;if(e in a)return e}}function Aa(){var a=yb(),a=zb()-a;24<a?(isFinite(a)&&(clearTimeout(da),da=setTimeout(Aa,a)),ea=0):(ea=1,Ab(Aa))}function yb(){for(var a=Date.now(),b=fa;b;)a>=b.time&&(b.flush=b.callback(a-b.time)),b=b.next;return a}function zb(){for(var a,b=fa,c=1/0;b;)b.flush?b=a?a.next=
b.next:fa=b.next:(b.time<c&&(c=b.time),b=(a=b).next);return ga=a,c}function C(a){return a}function Ba(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Hc(a){return a+""}function U(a,b,c){return new Ca(a,b,c)}function Ca(a,b,c){this.h=a;this.s=b;this.l=c}function Da(a,b,c){function d(a){return 360<a?a-=360:0>a&&(a+=360),60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;return a=isNaN(a)?0:0>(a%=360)?a+360:a,b=isNaN(b)?0:0>b?0:1<b?1:b,c=0>c?0:1<c?1:c,f=0.5>=c?c*(1+b):c+b-c*b,
e=2*c-f,G(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function V(a,b,c){return new ha(a,b,c)}function ha(a,b,c){this.h=a;this.c=b;this.l=c}function Bb(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),W(c,Math.cos(a*=Ic)*b,Math.sin(a)*b)}function W(a,b,c){return new ia(a,b,c)}function ia(a,b,c){this.l=a;this.a=b;this.b=c}function Cb(a,b,c){return 0<a?V(Math.atan2(c,b)*Ea,Math.sqrt(b*b+c*c),a):V(0/0,0/0,a)}function Fa(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Ga(a){return 0.008856<
a?Math.pow(a,1/3):7.787037*a+4/29}function Ha(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function G(a,b,c){return new Ia(a,b,c)}function Ia(a,b,c){this.r=a;this.g=b;this.b=c}function Ja(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Ka(a,b,c){var d,e,f,l=0,h=0,k=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case "hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case "rgb":return b(La(e[0]),
La(e[1]),La(e[2]))}return(f=ja.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(l=a.charAt(1),l+=l,h=a.charAt(2),h+=h,k=a.charAt(3),k+=k):7===a.length&&(l=a.substring(1,3),h=a.substring(3,5),k=a.substring(5,7)),l=parseInt(l,16),h=parseInt(h,16),k=parseInt(k,16)),b(l,h,k))}function Db(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),l=Math.max(a,b,c),h=l-f,k=(l+f)/2;return h?(e=0.5>k?h/(l+f):h/(2-l-f),d=a==l?(b-c)/h+(c>b?6:0):b==l?(c-a)/h+2:(a-b)/h+4,d*=60):(d=0/0,e=0<k&&1>k?0:d),
U(d,e,k)}function Eb(a,b,c){a=Ma(a);b=Ma(b);c=Ma(c);var d=Ga((0.4124564*a+0.3575761*b+0.1804375*c)/Fb),e=Ga((0.2126729*a+0.7151522*b+0.072175*c)/Gb);a=Ga((0.0193339*a+0.119192*b+0.9503041*c)/Hb);return W(116*e-16,500*(d-e),200*(e-a))}function Ma(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function La(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Na(a,b){a=g.rgb(a);b=g.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,l=b.g-d,h=b.b-e;return function(b){return a.r=
Math.round(c+f*b),a.g=Math.round(d+l*b),a.b=Math.round(e+h*b),a}}function Ib(a,b){var c,d={},e={};for(c in a)c in b?d[c]=O(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function D(a,b){return b-=a=+a,function(c){return a+b*c}}function Jb(a,b){var c,d,e,f,l=0,h=[],k=[];a+="";b+="";for(d=ka.lastIndex=0;c=ka.exec(b);++d)c.index&&h.push(b.substring(l,c.index)),k.push({i:h.length,x:c[0]}),h.push(null),l=ka.lastIndex;l<b.length&&h.push(b.substring(l));
d=0;for(e=k.length;(c=ka.exec(a))&&e>d;++d)if(f=k[d],f.x==c[0]){if(f.i)if(null==h[f.i+1])for(h[f.i-1]+=f.x,h.splice(f.i,1),c=d+1;e>c;++c)k[c].i--;else for(h[f.i-1]+=f.x+h[f.i+1],h.splice(f.i,2),c=d+1;e>c;++c)k[c].i-=2;else if(null==h[f.i+1])h[f.i]=f.x;else for(h[f.i]=f.x+h[f.i+1],h.splice(f.i+1,1),c=d+1;e>c;++c)k[c].i--;k.splice(d,1);e--;d--}else f.x=D(parseFloat(c[0]),parseFloat(f.x));for(;e>d;)f=k.pop(),null==h[f.i+1]?h[f.i]=f.x:(h[f.i]=f.x+h[f.i+1],h.splice(f.i+1,1)),e--;return 1===h.length?null==
h[0]?(f=k[0].x,function(a){return f(a)+""}):function(){return b}:function(a){for(d=0;e>d;++d)h[(f=k[d]).i]=f.x(a);return h.join("")}}function O(a,b){for(var c,d=g.interpolators.length;0<=--d&&!(c=g.interpolators[d](a,b)););return c}function Kb(a,b){var c,d=[],e=[],f=a.length,l=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(O(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;l>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function Jc(a){return function(b){return 0>=
b?0:1<=b?1:a(b)}}function Lb(a){return function(b){return 1-a(1-b)}}function Mb(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function Kc(a){return a*a}function Lc(a){return a*a*a}function Mc(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)}function Nc(a){return 1-Math.cos(a*Z/2)}function Oc(a){return Math.pow(2,10*(a-1))}function Pc(a){return 1-Math.sqrt(1-a*a)}function Qc(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+0.75:2.5/2.75>
a?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Nb(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ob(a){var b=[a.a,a.b],c=[a.c,a.d],d=Pb(b),e=b[0]*c[0]+b[1]*c[1],f=Pb((c[0]+=-e*b[0],c[1]+=-e*b[1],c))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Ea;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*Ea:0}function Pb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return b&&
(a[0]/=b,a[1]/=b),b}function Qb(a,b){var c,d=[],e=[],f=g.transform(a),l=g.transform(b),h=f.translate,k=l.translate,m=f.rotate,r=l.rotate,p=f.skew,s=l.skew,f=f.scale,l=l.scale;return h[0]!=k[0]||h[1]!=k[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:D(h[0],k[0])},{i:3,x:D(h[1],k[1])})):k[0]||k[1]?d.push("translate("+k+")"):d.push(""),m!=r?(180<m-r?r+=360:180<r-m&&(m+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:D(m,r)})):r&&d.push(d.pop()+"rotate("+r+")"),p!=s?e.push({i:d.push(d.pop()+
"skewX(",null,")")-2,x:D(p,s)}):s&&d.push(d.pop()+"skewX("+s+")"),f[0]!=l[0]||f[1]!=l[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:D(f[0],l[0])},{i:c-2,x:D(f[1],l[1])})):(1!=l[0]||1!=l[1])&&d.push(d.pop()+"scale("+l+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Rc(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Sc(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Tc(a){return a.x}
function Uc(a){return a.y}function Vc(a,b,c){a.y0=b;a.y=c}function Oa(a){return g.range(a.length)}function Pa(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Wc(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function Xc(a){return a.reduce(Yc,0)}function Yc(a,b){return a+b[1]}function Zc(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function $c(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}
function Rb(a,b){var c,d=0,e=a.length-1,f=a[d],l=a[e];return f>l&&(c=d,d=e,e=c,c=f,f=l,l=c),a[d]=b.floor(f),a[e]=b.ceil(l),a}function ad(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:bd}function cd(a,b,c,d){var e=[],f=[],l=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++l<=h;)e.push(c(a[l-1],a[l])),f.push(d(b[l-1],b[l]));return function(b){var c=g.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function X(a){var b=
a[0];a=a[a.length-1];return a>b?[b,a]:[a,b]}function Sb(a,b,c,d){function e(){var e=2<Math.min(a.length,b.length)?cd:$c,g=d?Sc:Rc;return l=e(a,b,g,c),h=e(b,a,g,O),f}function f(a){return l(a)}var l,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Nb)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?
(c=a,e()):c},f.ticks=function(b){return g.range.apply(g,Qa(a,b))},f.tickFormat=function(b,c){return dd(a,b,c)},f.nice=function(b){var c=a,d=ad;b?b=Qa(a,b)[2]:(b=X(a),b=Math.pow(10,Math.round(Math.log(b[1]-b[0])/Math.LN10)-1));return Rb(c,d(b)),e()},f.copy=function(){return Sb(a,b,c,d)},e()}function Qa(a,b){var c=X(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;return 0.15>=d?e*=10:0.35>=d?e*=5:0.75>=d&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+0.5*e,c[2]=
e,c}function dd(a,b,c){var d=-Math.floor(Math.log(Qa(a,b)[2])/Math.LN10+0.01);return g.format(c?c.replace(Tb,function(a,b,c,h,k,g,r,p,s,v){return[b,c,h,k,g,r,p,s||"."+(d-2*("%"===v)),v].join("")}):",."+d+"f")}function Ub(a,b){function c(b){return f[((e.get(b)||e.set(b,a.push(b)))-1)%f.length]}function d(b,c){return g.range(a.length).map(function(a){return b+c*a})}var e,f,l;return c.domain=function(d){if(!arguments.length)return a;a=[];e=new I;for(var f,l=-1,g=d.length;++l<g;)e.has(f=d[l])||e.set(f,
a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,l=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,k){2>arguments.length&&(k=0);var g=e[0],r=e[1],p=(r-g)/(Math.max(1,a.length-1)+k);return f=d(2>a.length?(g+r)/2:g+p*k/2,p),l=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,k,g){2>arguments.length&&(k=0);3>arguments.length&&(g=k);var r=e[1]<e[0],p=e[r-0],s=(e[1-r]-p)/(a.length-k+2*g);return f=d(p+s*g,s),r&&f.reverse(),l=s*(1-k),b={t:"rangeBands",
a:arguments},c},c.rangeRoundBands=function(e,k,g){2>arguments.length&&(k=0);3>arguments.length&&(g=k);var r=e[1]<e[0],p=e[r-0],s=e[1-r],v=Math.floor((s-p)/(a.length-k+2*g));return f=d(p+Math.round((s-p-(a.length-k)*v)/2),v),r&&f.reverse(),l=Math.round(v*(1-k)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return l},c.rangeExtent=function(){return X(b.a[0])},c.copy=function(){return Ub(a,b)},c.domain(a)}function K(a){return Ra(a,n),a}function Sa(a){return"function"==typeof a?a:function(){return Ta(a,
this)}}function Vb(a){return"function"==typeof a?a:function(){return Ua(a,this)}}function Wb(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function l(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,
c)}return a=g.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:l:a.local?f:e}function Xb(a){return a.trim().replace(/\s+/g," ")}function Yb(a){return RegExp("(?:^|\\s+)"+g.requote(a)+"(?:\\s+|$)","g")}function Zb(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=a.trim().split(/\s+/).map(ed);var e=a.length;return"function"==typeof b?d:c}function ed(a){var b=Yb(a);return function(c,d){if(e=c.classList)return d?
e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",Xb(e+" "+a))):c.setAttribute("class",Xb(e.replace(b," ")))}}function $b(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function ac(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=
b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function bc(a){return"function"==typeof a?a:(a=g.ns.qualify(a)).local?function(){return L.createElementNS(a.space,a.local)}:function(){return L.createElementNS(this.namespaceURI,a)}}function cc(a){return function(){return dc(this,a)}}function fd(a){return arguments.length||(a=g.ascending),function(b,c){return!b-!c||a(b.__data__,c.__data__)}}function gd(){}function ec(a,b,c){function d(){var b=this[l];
b&&(this.removeEventListener(a,b,b.$),delete this[l])}function e(){var e=k(b,P(arguments));d.call(this);this.addEventListener(a,this[l]=e,e.$=c);e._=b}function f(){var b,c=RegExp("^__on([^.]+)"+g.requote(a)+"$"),d;for(d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$);delete this[d]}}var l="__on"+a,h=a.indexOf("."),k=fc;0<h&&(a=a.substring(0,h));var m=Va.get(a);return m&&(a=m,k=hd),h?b?e:d:b?gd:f}function fc(a,b){return function(c){var d=g.event;g.event=c;b[0]=this.__data__;
try{a.apply(this,b)}finally{g.event=d}}}function hd(a,b){var c=fc(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||c.call(this,a)}}function M(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],l=0,h=f.length;h>l;l++)(e=f[l])&&b(e,l,c);return a}function gc(a){return Ra(a,E),a}function id(a){var b,c;return function(d,e,f){d=a[f].update;var l=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<l;);return e}}function $(a,b){return Ra(a,t),a.id=b,
a}function Wa(a,b,c,d){var e=a.id;return M(a,"function"==typeof c?function(a,l,h){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,l,h)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function jd(a){return null==a&&(a=""),function(){this.textContent=a}}function la(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var l=d.time;return f=e[c]={tween:new I,time:l,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,g.timer(function(d){function k(d){return e.active>
c?r():(e.active=c,f.event&&f.event.start.call(a,p,b),f.tween.forEach(function(c,d){(d=d.call(a,p,b))&&n.push(d)}),m(d)||g.timer(m,0,l),1)}function m(d){if(e.active!==c)return r();d=(d-v)/J;for(var h=s(d),l=n.length;0<l;)n[--l].call(a,h);return 1<=d?(r(),f.event&&f.event.end.call(a,p,b),1):void 0}function r(){return--e.count?delete e[c]:delete a.__transition__,1}var p=a.__data__,s=f.ease,v=f.delay,J=f.duration,n=[];return d>=v?k(d):g.timer(k,v,l),1},0,l),f}}function hc(a,b){a.attr("transform",function(a){return"translate("+
b(a)+",0)"})}function ic(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function kd(a,b,c){if(d=[],c&&1<b.length){for(var d,e,f=X(a.domain()),l=-1,h=b.length,g=(b[1]-b[0])/++c;++l<h;)for(a=c;0<--a;)(e=+b[l]-a*g)>=f[0]&&d.push(e);--l;for(a=0;++a<c&&(e=+b[l]+a*g)<f[1];)d.push(e)}return d}function Q(a){return"function"==typeof a?a:function(){return a}}function ma(){return!0}function ld(a){function b(b){function l(){p.push("M",f(a(s),h))}for(var g,p=[],s=[],v=-1,J=b.length,n=Q(c),
w=Q(d);++v<J;)e.call(this,g=b[v],v)?s.push([+n.call(this,g,v),+w.call(this,g,v)]):s.length&&(l(),s=[]);return s.length&&l(),p.length?p.join(""):null}var c=Xa,d=jc,e=ma,f=z,l=f.key,h=0.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(l="function"==typeof a?f=a:(f=Ya.get(a)||z).key,b):l},b.tension=function(a){return arguments.length?
(h=a,b):h},b}function Xa(a){return a[0]}function jc(a){return a[1]}function z(a){return a.join("L")}function Za(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function $a(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function na(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return z(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,k=1;if(c&&(d+="Q"+(f[0]-
2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],k=2),1<b.length)for(h=b[1],f=a[k],k++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,k++)f=a[k],h=b[e],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];c&&(c=a[k],d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+c[0]+","+c[1]);return d}function ab(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,k=a.length;++h<k;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function kc(a){if(3>
a.length)return z(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],e=[e,",",f,"L",B(N,g),",",B(N,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),bb(e,g,h);return a.pop(),e.push("L",d),e.join("")}function B(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function bb(a,b,c){a.push("C",B(lc,b),",",B(lc,c),",",B(mc,b),",",B(mc,c),",",B(N,b),",",B(N,c))}function cb(a,b){return(b[1]-a[1])/(b[0]-a[0])}function md(a){function b(b){function k(){H.push("M",
h(a(x),p),r,m(a(aa.reverse()),p),"Z")}for(var J,n,w,H=[],aa=[],x=[],q=-1,t=b.length,u=Q(c),y=Q(e),z=c===d?function(){return n}:Q(d),B=e===f?function(){return w}:Q(f);++q<t;)g.call(this,J=b[q],q)?(aa.push([n=+u.call(this,J,q),w=+y.call(this,J,q)]),x.push([+z.call(this,J,q),+B.call(this,J,q)])):aa.length&&(k(),aa=[],x=[]);return aa.length&&k(),H.length?H.join(""):null}var c=Xa,d=Xa,e=0,f=jc,g=ma,h=z,k=h.key,m=h,r="L",p=0.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?
(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(k="function"==typeof a?h=a:(h=Ya.get(a)||z).key,m=h.reverse||h,r=h.closed?"M":"L",b):k},b.tension=function(a){return arguments.length?(p=a,b):p},b}function R(){this._=new Date(1<
arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function S(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new u(c-1)),1),c}function f(a,c){return b(a=new u(+a),c),a}function g(a,d,f){a=e(a);var h=[];if(1<f)for(;d>a;)c(a)%f||h.push(new Date(+a)),b(a,1);else for(;d>a;)h.push(new Date(+a)),b(a,1);return h}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var h=a.utc=oa(a);return h.floor=h,h.round=oa(d),h.ceil=oa(e),h.offset=oa(f),h.range=function(a,
b,c){try{u=R;var d=new R;return d._=a,g(d,b,c)}finally{u=Date}},a}function oa(a){return function(b,c){try{u=R;var d=new R;return d._=b,a(d,c)._}finally{u=Date}}}function pa(a,b,c,d){for(var e,f,g=0,h=b.length,k=c.length;h>g;){if(d>=k)return-1;if(e=b.charCodeAt(g++),37===e){if(f=nd[b.charAt(g++)],!f||0>(d=f(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function qa(a){return RegExp("^(?:"+a.map(g.requote).join("|")+")","i")}function ra(a){for(var b=new I,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),
c);return b}function y(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(c>e?Array(c-e+1).join(b)+a:a)}function nc(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function oc(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function db(a){return a.toISOString()}function eb(a,b,c){function d(b){return a(b)}return d.invert=function(b){return fb(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),
d):a.domain().map(fb)},d.nice=function(a){return d.domain(Rb(d.domain(),a))},d.ticks=function(c,f){var l=X(d.domain());if("function"!=typeof c){var h=(l[1]-l[0])/c,k=g.bisect(sa,h);if(k==sa.length)return b.year(l,c);if(!k)return a.ticks(c).map(fb);Math.log(h/sa[k-1])<Math.log(sa[k]/h)&&--k;c=b[k];f=c[1];c=c[0].range}return c(l[0],new Date(+l[1]+1),f)},d.tickFormat=function(){return c},d.copy=function(){return eb(a.copy(),b,c)},g.rebind(d,a,"range","rangeRound","interpolate","clamp")}function fb(a){return new Date(a)}
function pc(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function gb(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function od(a){var b=a.getFullYear(),c=gb(b),d=gb(b+1);return b+(a-c)/(d-c)}function hb(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function pd(a){var b=a.getUTCFullYear(),c=hb(b),d=hb(b+1);return b+(a-c)/(d-c)}var g={version:"3.2.6",extent:function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=
(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},max:function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},min:function(a,
b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},mean:function(a,b){var c,d=a.length,e=0,f=-1,g=0;if(1===arguments.length)for(;++f<d;)sb(c=a[f])&&(e+=(c-e)/++g);else for(;++f<d;)sb(c=b.call(a,a[f],f))&&(e+=(c-e)/++g);return g?e:void 0},merge:function(a){return Array.prototype.concat.apply([],
a)},range:function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0)),1/0===(b-a)/c)throw Error("infinite range");var d,e=[],f;d=Math.abs(c);for(f=1;d*f%1;)f*=10;var g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},sum:function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},zip:function(){if(!(d=arguments.length))return[];
for(var a=-1,b=g.min(arguments,Ec),c=Array(b);++a<b;)for(var d,e=-1,f=c[a]=Array(d);++e<d;)f[e]=arguments[e][a];return c},transpose:function(a){return g.zip.apply(g,a)}};T.prototype.toString=function(){return this.rgb()+""};Date.now||(Date.now=function(){return+new Date});var L=document,Y=L.documentElement,A=window;try{L.createElement("div").style.setProperty("opacity",0,"")}catch(Pd){var ta=A.Element.prototype,qd=ta.setAttribute,rd=ta.setAttributeNS,qc=A.CSSStyleDeclaration.prototype,sd=qc.setProperty;
ta.setAttribute=function(a,b){qd.call(this,a,b+"")};ta.setAttributeNS=function(a,b,c){rd.call(this,a,b,c+"")};qc.setProperty=function(a,b,c){sd.call(this,a,b+"",c)}}g.map=function(a){var b=new I,c;for(c in a)b.set(c,a[c]);return b};(function(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}})(I,{has:function(a){return ba+a in this},get:function(a){return this[ba+a]},set:function(a,b){return this[ba+a]=b},remove:function(a){return a=ba+
a,a in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===td&&a.call(this,b.substring(1),this[b])}});var ba="\x00",td=ba.charCodeAt(0);g.dispatch=function(){for(var a=new tb,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=Fc(a);return a};
tb.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(0<=c&&(d=a.substring(c+1),a=a.substring(0,c)),a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}};g.event=null;g.mouse=function(a){return vb(a,ub())};var za=/WebKit/.test(A.navigator.userAgent)?-1:0,P=function(a){return Array.prototype.slice.call(a)};try{P(Y.childNodes)[0].nodeType}catch(Qd){P=Gc}g.touches=function(a,b){return 2>
arguments.length&&(b=ub().touches),b?P(b).map(function(b){var d=vb(a,b);return d.identifier=b.identifier,d}):[]};var fa,ga,ea,da,xb="webkit ms moz Moz o O".split(" ");g.timer=function(a,b,c){if(3>arguments.length){if(2>arguments.length)b=0;else if(!isFinite(b))return;c=Date.now()}var d={callback:a,time:c+b,next:null};ga?ga.next=d:fa=d;ga=d;ea||(da=clearTimeout(da),ea=1,Ab(Aa))};g.timer.flush=function(){yb();zb()};var Ab=A[wb(A,"requestAnimationFrame")]||function(a){setTimeout(a,17)},ua=[3,3],ud="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,
b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});g.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=g.round(a,Ba(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),ud[8+c/3]};g.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};g.format=function(a){a=Tb.exec(a);var b=a[1]||" ",c=a[2]||">",d=a[3]||"",e=a[4]||"",f=a[5],l=+a[6],h=a[7],
k=a[8],m=a[9],r=1,p="",s=!1;switch(k&&(k=+k.substring(1)),(f||"0"===b&&"="===c)&&(f=b="0",c="=",h&&(l-=Math.floor((l-1)/4))),m){case "n":h=!0;m="g";break;case "%":r=100;p="%";m="f";break;case "p":r=100;p="%";m="r";break;case "b":case "o":case "x":case "X":"#"===e&&(e="0"+m.toLowerCase());case "c":case "d":s=!0;k=0;break;case "s":r=-1,m="r"}"#"===e?e="":"$"===e&&(e="$");"r"!=m||k||(m="g");null!=k&&("g"==m?k=Math.max(1,Math.min(21,k)):("e"==m||"f"==m)&&(k=Math.max(0,Math.min(20,k))));var m=vd.get(m)||
Hc,v=f&&h;return function(a){if(s&&a%1)return"";var n=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>r){var w=g.formatPrefix(a,k);a=w.scale(a);p=w.symbol}else a*=r;a=m(a,k);var H=a.lastIndexOf("."),w=0>H?a:a.substring(0,H),H=0>H?"":"."+a.substring(H+1);!f&&h&&(w=ib(w));var q=e.length+w.length+H.length+(v?0:n.length),x=l>q?Array(q=l-q+1).join(b):"";return v&&(w=ib(x+w)),n+=e,a=w+H,("<"===c?n+a+x:">"===c?x+n+a:"^"===c?x.substring(0,q>>=1)+n+a+x.substring(q):n+(v?a:x+a))+p}};var Tb=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
vd=g.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=g.round(a,Ba(a,b))).toFixed(Math.max(0,Math.min(20,Ba(a*(1+1E-15),b))))}}),ib=C;if(ua)var wd=ua.length,ib=function(a){for(var b=a.length,c=[],
d=0,e=ua[0];0<b&&0<e;)c.push(a.substring(b-=e,b+e)),e=ua[d=(d+1)%wd];return c.reverse().join(",")};g.requote=function(a){return a.replace(xd,"\\$&")};var xd=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;g.hsl=function(a,b,c){return 1===arguments.length?a instanceof Ca?U(a.h,a.s,a.l):Ka(""+a,Db,U):U(+a,+b,+c)};var jb=Ca.prototype=new T;jb.brighter=function(a){return a=Math.pow(0.7,arguments.length?a:1),U(this.h,this.s,this.l/a)};jb.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),U(this.h,this.s,
a*this.l)};jb.rgb=function(){return Da(this.h,this.s,this.l)};var Z=Math.PI,Ic=Z/180,Ea=180/Z;g.hcl=function(a,b,c){return 1===arguments.length?a instanceof ha?V(a.h,a.c,a.l):a instanceof ia?Cb(a.l,a.a,a.b):Cb((a=Eb((a=g.rgb(a)).r,a.g,a.b)).l,a.a,a.b):V(+a,+b,+c)};var kb=ha.prototype=new T;kb.brighter=function(a){return V(this.h,this.c,Math.min(100,this.l+va*(arguments.length?a:1)))};kb.darker=function(a){return V(this.h,this.c,Math.max(0,this.l-va*(arguments.length?a:1)))};kb.rgb=function(){return Bb(this.h,
this.c,this.l).rgb()};g.lab=function(a,b,c){return 1===arguments.length?a instanceof ia?W(a.l,a.a,a.b):a instanceof ha?Bb(a.l,a.c,a.h):Eb((a=g.rgb(a)).r,a.g,a.b):W(+a,+b,+c)};var va=18,Fb=0.95047,Gb=1,Hb=1.08883,lb=ia.prototype=new T;lb.brighter=function(a){return W(Math.min(100,this.l+va*(arguments.length?a:1)),this.a,this.b)};lb.darker=function(a){return W(Math.max(0,this.l-va*(arguments.length?a:1)),this.a,this.b)};lb.rgb=function(){var a=(this.l+16)/116,b=a+this.a/500,c=a-this.b/200;return b=
Fa(b)*Fb,a=Fa(a)*Gb,c=Fa(c)*Hb,G(Ha(3.2404542*b-1.5371385*a-0.4985314*c),Ha(-0.969266*b+1.8760108*a+0.041556*c),Ha(0.0556434*b-0.2040259*a+1.0572252*c))};g.rgb=function(a,b,c){return 1===arguments.length?a instanceof Ia?G(a.r,a.g,a.b):Ka(""+a,G,Da):G(~~a,~~b,~~c)};var wa=Ia.prototype=new T;wa.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;return b||c||d?(b&&30>b&&(b=30),c&&30>c&&(c=30),d&&30>d&&(d=30),G(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/
a)),Math.min(255,Math.floor(d/a)))):G(30,30,30)};wa.darker=function(a){return a=Math.pow(0.7,arguments.length?a:1),G(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};wa.hsl=function(){return Db(this.r,this.g,this.b)};wa.toString=function(){return"#"+Ja(this.r)+Ja(this.g)+Ja(this.b)};var ja=g.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",
brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",
darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",
khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",
maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",
paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",
teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});ja.forEach(function(a,b){ja.set(a,Ka(b,G,Da))});g.interpolateRgb=Na;g.interpolateObject=Ib;g.interpolateNumber=D;g.interpolateString=Jb;var ka=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;g.interpolate=O;g.interpolators=[function(a,b){var c=typeof b;return("string"===c?ja.has(b)||/^(#|rgb\(|hsl\()/.test(b)?Na:Jb:b instanceof
T?Na:"object"===c?Array.isArray(b)?Kb:Ib:D)(a,b)}];g.interpolateArray=Kb;var rc=function(){return C},yd=g.map({linear:rc,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Kc},cubic:function(){return Lc},sin:function(){return Nc},exp:function(){return Oc},circle:function(){return Pc},elastic:function(a,b){var c;return 2>arguments.length&&(b=0.45),arguments.length?c=b/(2*Z)*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Z/b)}},back:function(a){return a||
(a=1.70158),function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Qc}}),zd=g.map({"in":C,out:Lb,"in-out":Mb,"out-in":function(a){return Mb(Lb(a))}});g.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in";return c=yd.get(c)||rc,b=zd.get(b)||C,Jc(b(c.apply(null,Array.prototype.slice.call(arguments,1))))};g.interpolateHcl=function(a,b){a=g.hcl(a);b=g.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,l=b.c-d,h=b.l-e;return isNaN(l)&&(l=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=
0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(b){return a.h=c+f*b,a.c=d+l*b,a.l=e+h*b,a}};g.interpolateHsl=function(a,b){a=g.hsl(a);b=g.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,l=b.s-d,h=b.l-e;return isNaN(l)&&(l=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360),function(b){return a.h=c+f*b,a.s=d+l*b,a.l=e+h*b,a}};g.interpolateLab=function(a,b){a=g.lab(a);b=g.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,l=b.a-d,h=b.b-e;return function(b){return a.l=c+f*b,a.a=d+l*b,
a.b=e+h*b,a}};g.interpolateRound=Nb;var mb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};g.ns={prefix:mb,qualify:function(a){var b=a.indexOf(":"),c=a;return 0<=b&&(c=a.substring(0,b),a=a.substring(b+1)),mb.hasOwnProperty(c)?{space:mb[c],local:a}:a}};g.transform=function(a){var b=L.createElementNS(g.ns.prefix.svg,"g");return(g.transform=function(a){if(null!=
a){b.setAttribute("transform",a);var d=b.transform.baseVal.consolidate()}return new Ob(d?d.matrix:Ad)})(a)};Ob.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ad={a:1,b:0,c:0,d:1,e:0,f:0};g.interpolateTransform=Qb;g.permute=function(a,b){for(var c=[],d=-1,e=b.length;++d<e;)c[d]=a[b[d]];return c};g.layout={};g.layout.stack=function(){function a(h,k){var m=h.map(function(c,d){return b.call(a,c,d)}),r=m.map(function(b){return b.map(function(b,
c){return[f.call(a,b,c),l.call(a,b,c)]})}),p=c.call(a,r,k),m=g.permute(m,p),r=g.permute(r,p),s,v,n=d.call(a,r,k),q=m.length,w=m[0].length;for(s=0;w>s;++s)for(e.call(a,m[0][s],v=n[s],r[0][s][1]),p=1;q>p;++p)e.call(a,m[p][s],v+=r[p-1][s][1],r[p][s][1]);return h}var b=C,c=Oa,d=Pa,e=Vc,f=Tc,l=Uc;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:Bd.get(b)||Oa,a):c},a.offset=function(b){return arguments.length?(d="function"==
typeof b?b:Cd.get(b)||Pa,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(l=b,a):l},a.out=function(b){return arguments.length?(e=b,a):e},a};var Bd=g.map({"inside-out":function(a){var b,c=a.length,d=a.map(Wc),e=a.map(Xc),f=g.range(c).sort(function(a,b){return d[a]-d[b]}),l=0,h=0,k=[],m=[];for(a=0;c>a;++a)b=f[a],h>l?(l+=e[b],k.push(b)):(h+=e[b],m.push(b));return m.reverse().concat(k)},reverse:function(a){return g.range(a.length).reverse()},"default":Oa}),
Cd=g.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,k=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d);g.push(d)}for(c=0;f>c;++c)k[c]=(h-g[c])/2;return k},wiggle:function(a){var b,c,d,e,f,g,h,k,m,r=a.length,p=a[0],s=p.length,v=[];v[0]=k=m=0;for(c=1;s>c;++c){for(e=b=0;r>b;++b)e+=a[b][c][1];f=b=0;for(h=p[c][0]-p[c-1][0];r>b;++b){d=0;for(g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}v[c]=k-=e?f/e*h:0;m>k&&(m=k)}for(c=0;s>
c;++c)v[c]-=m;return v},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(d=b=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:Pa});g.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=Zc(a,b,b[c]);return a};var bd={floor:C,ceil:C};g.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=
d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);for(4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var sc=g.bisector(function(a){return a});g.bisectLeft=sc.left;g.bisect=g.bisectRight=sc.right;g.scale={};g.scale.linear=function(){return Sb([0,1],[0,1],O,!1)};g.scale.ordinal=function(){return Ub([],{t:"range",a:[[]]})};var Ra={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},
Ta=function(a,b){return b.querySelector(a)},Ua=function(a,b){return b.querySelectorAll(a)},Dd=Y[wb(Y,"matchesSelector")],dc=function(a,b){return Dd.call(a,b)};"function"==typeof Sizzle&&(Ta=function(a,b){return Sizzle(a,b)[0]||null},Ua=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},dc=Sizzle.matchesSelector);g.selection=function(){return tc};var n=g.selection.prototype=[];n.select=function(a){var b,c,d,e,f=[];a=Sa(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);b.parentNode=(d=this[g]).parentNode;
for(var k=-1,m=d.length;++k<m;)(e=d[k])?(b.push(c=a.call(e,e.__data__,k,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return K(f)};n.selectAll=function(a){var b,c,d=[];a=Vb(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,k=g.length;++h<k;)(c=g[h])&&(d.push(b=P(a.call(c,c.__data__,h,e))),b.parentNode=c);return K(d)};n.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=g.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(Wb(b,
a[b]));return this}return this.each(Wb(a,b))};n.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!Yb(a[e]).test(b))return!1;return!0}for(b in a)this.each(Zb(b,a[b]));return this}return this.each(Zb(a,b))};n.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each($b(c,
a[c],b));return this}if(2>d)return A.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each($b(a,b,c))};n.property=function(a,b){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(b in a)this.each(ac(b,a[b]));return this}return this.each(ac(a,b))};n.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=
a}):this.node().textContent};n.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};n.append=function(a){return a=bc(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})};n.insert=function(a,b){return a=bc(a),b=Sa(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,
arguments))})};n.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};n.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,n=Math.min(g,l),q=Array(l),x=Array(l),t=Array(g);if(b){var u=new I,y=new I,z=[];for(d=-1;++d<g;)n=b.call(e=a[d],e.__data__,d),u.has(n)?t[d]=e:u.set(n,e),z.push(n);for(d=-1;++d<l;)n=b.call(c,f=c[d],d),(e=u.get(n))?(q[d]=e,e.__data__=f):y.has(n)||(x[d]={__data__:f}),y.set(n,f),u.remove(n);for(d=-1;++d<g;)u.has(z[d])&&(t[d]=
a[d])}else{for(d=-1;++d<n;)e=a[d],f=c[d],e?(e.__data__=f,q[d]=e):x[d]={__data__:f};for(;l>d;++d)x[d]={__data__:c[d]};for(;g>d;++d)t[d]=a[d]}x.update=q;x.parentNode=q.parentNode=t.parentNode=a.parentNode;h.push(x);k.push(q);m.push(t)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=gc([]),k=K([]),m=K([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],
a);return k.enter=function(){return h},k.exit=function(){return m},k};n.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};n.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=cc(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);b.parentNode=(c=this[f]).parentNode;for(var h=0,k=c.length;k>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return K(e)};n.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];0<=
--e;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this};g.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:0/0};n.sort=function(a){a=fd.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};n.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(ec(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(ec(a,b,c))};var Va=g.map({mouseenter:"mouseover",
mouseleave:"mouseout"});Va.forEach(function(a){"on"+a in L&&Va.remove(a)});n.each=function(a){return M(this,function(b,c,d){a.call(b,b.__data__,c,d)})};n.call=function(a){var b=P(arguments);return a.apply(b[0]=this,b),this};n.empty=function(){return!this.node()};n.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null};n.size=function(){var a=0;return this.each(function(){++a}),a};var E=[];g.selection.enter=gc;g.selection.enter.prototype=
E;E.append=n.append;E.empty=n.empty;E.node=n.node;E.call=n.call;E.size=n.size;E.select=function(a){for(var b,c,d,e,f,g=[],h=-1,k=this.length;++h<k;){d=(e=this[h]).update;g.push(b=[]);b.parentNode=e.parentNode;for(var m=-1,r=e.length;++m<r;)(f=e[m])?(b.push(d[m]=c=a.call(e.parentNode,f.__data__,m,h)),c.__data__=f.__data__):b.push(null)}return K(g)};E.insert=function(a,b){return 2>arguments.length&&(b=id(this)),n.insert.call(this,a,b)};n.transition=function(){for(var a,b,c=ca||++uc,d=[],e=xa||{time:Date.now(),
ease:Mc,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],k=-1,m=h.length;++k<m;)(b=h[k])&&la(b,k,c,e),a.push(b)}return $(d,c)};g.select=function(a){a=["string"==typeof a?Ta(a,L):a];return a.parentNode=Y,K([a])};g.selectAll=function(a){a=P("string"==typeof a?Ua(a,L):a);return a.parentNode=Y,K([a])};var ca,xa,tc=g.select(Y),t=[],uc=0;t.call=n.call;t.empty=n.empty;t.node=n.node;t.size=n.size;g.transition=function(a){return arguments.length?ca?a.transition():a:tc.transition()};
g.transition.prototype=t;t.select=function(a){var b,c,d,e=this.id,f=[];a=Sa(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var k=this[g],m=-1,r=k.length;++m<r;)(d=k[m])&&(c=a.call(d,d.__data__,m,g))?("__data__"in d&&(c.__data__=d.__data__),la(c,m,e,d.__transition__[e]),b.push(c)):b.push(null)}return $(f,e)};t.selectAll=function(a){var b,c,d,e,f=this.id,g=[];a=Vb(a);for(var h=-1,k=this.length;++h<k;)for(var m=this[h],r=-1,p=m.length;++r<p;)if(b=m[r]){e=b.__transition__[f];c=a.call(b,b.__data__,
r,h);g.push(b=[]);for(var n=-1,v=c.length;++n<v;)(d=c[n])&&la(d,n,f,e),b.push(d)}return $(g,f)};t.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=cc(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);c=this[f];for(var h=0,k=c.length;k>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return $(e,this.id,this.time).ease(this.ease())};t.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):M(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:
function(d){d.__transition__[c].tween.set(a,b)})};t.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=l(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=l(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(2>arguments.length){for(b in a)this.attr(b,
a[b]);return this}var l="transform"==a?Qb:O,h=g.ns.qualify(a);return Wa(this,"attr."+a,b,h.local?f:e)};t.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=g.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};t.style=function(a,b,c){function d(){this.style.removeProperty(a)}
var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Wa(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d,e=A.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=O(e,b),function(b){this.style.setProperty(a,d(b),c)})})})};t.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,A.getComputedStyle(this,null).getPropertyValue(a));return f&&
function(b){this.style.setProperty(a,f(b),c)}})};t.text=function(a){return Wa(this,"text",a,jd)};t.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};t.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=g.ease.apply(g,arguments)),M(this,function(c){c.__transition__[b].ease=a}))};t.delay=function(a){var b=this.id;return M(this,"function"==typeof a?function(c,
d,e){c.__transition__[b].delay=0|a.call(c,c.__data__,d,e)}:(a|=0,function(c){c.__transition__[b].delay=a}))};t.duration=function(a){var b=this.id;return M(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,0|a.call(c,c.__data__,d,e))}:(a=Math.max(1,0|a),function(c){c.__transition__[b].duration=a}))};t.each=function(a,b){var c=this.id;if(2>arguments.length){var d=xa,e=ca;ca=c;M(this,function(b,d,e){xa=b.__transition__[c];a.call(b,b.__data__,d,e)});xa=d;ca=e}else M(this,
function(d){d=d.__transition__[c];(d.event||(d.event=g.dispatch("start","end"))).on(a,b)});return this};t.transition=function(){for(var a,b,c,d,e=this.id,f=++uc,g=[],h=0,k=this.length;k>h;h++){g.push(a=[]);b=this[h];for(var m=0,n=b.length;n>m;m++)(c=b[m])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,la(c,m,f,d)),a.push(c)}return $(g,f)};g.svg={};g.svg.axis=function(){function a(a){a.each(function(){var a,p=g.select(this),q=null==m?c.ticks?c.ticks.apply(c,k):c.domain():m,t=null==b?c.tickFormat?
c.tickFormat.apply(c,k):String:b,w=kd(c,q,n),u=p.selectAll(".tick.minor").data(w,String),w=u.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1E-6),y=g.transition(u.exit()).style("opacity",1E-6).remove(),u=g.transition(u).style("opacity",1),x=p.selectAll(".tick.major").data(q,String),q=x.enter().insert("g",".domain").attr("class","tick major").style("opacity",1E-6),z=g.transition(x.exit()).style("opacity",1E-6).remove(),B=g.transition(x).style("opacity",1),A=c.rangeExtent?
c.rangeExtent():X(c.range()),p=p.selectAll(".domain").data([0]),p=(p.enter().append("path").attr("class","domain"),g.transition(p)),C=c.copy(),G=this.__chart__||C;this.__chart__=C;q.append("line");q.append("text");var D=q.select("line"),E=B.select("line"),t=x.select("text").text(t),x=q.select("text"),F=B.select("text");switch(d){case "bottom":a=hc;w.attr("y2",f);u.attr("x2",0).attr("y2",f);D.attr("y2",e);x.attr("y",Math.max(e,0)+h);E.attr("x2",0).attr("y2",e);F.attr("x",0).attr("y",Math.max(e,0)+
h);t.attr("dy",".71em").style("text-anchor","middle");p.attr("d","M"+A[0]+","+l+"V0H"+A[1]+"V"+l);break;case "top":a=hc;w.attr("y2",-f);u.attr("x2",0).attr("y2",-f);D.attr("y2",-e);x.attr("y",-(Math.max(e,0)+h));E.attr("x2",0).attr("y2",-e);F.attr("x",0).attr("y",-(Math.max(e,0)+h));t.attr("dy","0em").style("text-anchor","middle");p.attr("d","M"+A[0]+","+-l+"V0H"+A[1]+"V"+-l);break;case "left":a=ic;w.attr("x2",-f);u.attr("x2",-f).attr("y2",0);D.attr("x2",-e);x.attr("x",-(Math.max(e,0)+h));E.attr("x2",
-e).attr("y2",0);F.attr("x",-(Math.max(e,0)+h)).attr("y",0);t.attr("dy",".32em").style("text-anchor","end");p.attr("d","M"+-l+","+A[0]+"H0V"+A[1]+"H"+-l);break;case "right":a=ic,w.attr("x2",f),u.attr("x2",f).attr("y2",0),D.attr("x2",e),x.attr("x",Math.max(e,0)+h),E.attr("x2",e).attr("y2",0),F.attr("x",Math.max(e,0)+h).attr("y",0),t.attr("dy",".32em").style("text-anchor","start"),p.attr("d","M"+l+","+A[0]+"H0V"+A[1]+"H"+l)}if(c.rangeBand){var I=C.rangeBand()/2,w=function(a){return C(a)+I};q.call(a,
w);B.call(a,w)}else q.call(a,G),B.call(a,C),z.call(a,C),w.call(a,G),u.call(a,C),y.call(a,C)})}var b,c=g.scale.linear(),d=vc,e=6,f=6,l=6,h=3,k=[10],m=null,n=0;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ed?b+"":vc,a):d},a.ticks=function(){return arguments.length?(k=arguments,a):k},a.tickValues=function(b){return arguments.length?(m=b,a):m},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b,c){if(!arguments.length)return e;
var d=arguments.length-1;return e=+b,f=1<d?+c:e,l=0<d?+arguments[d]:e,a},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(b){return arguments.length?(n=+b,a):n},a};var vc="bottom",Ed={top:1,right:1,bottom:1,left:1};g.functor=Q;g.svg.line=function(){return ld(C)};var Ya=g.map({linear:z,"linear-closed":function(a){return z(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return 1<c&&e.push("H",
d[0]),e.join("")},"step-before":Za,"step-after":$a,basis:kc,"basis-open":function(a){if(4>a.length)return z(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];3>++d;)b=a[d],f.push(b[0]),g.push(b[1]);c.push(B(N,f)+","+B(N,g));for(--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),bb(c,f,g);return c.join("")},"basis-closed":function(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];4>++d;)c=a[d%e],g.push(c[0]),h.push(c[1]);b=[B(N,g),",",B(N,h)];for(--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),
h.push(c[1]),bb(b,g,h);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,k=a[c][1]-g,m=-1;++m<=c;)d=a[m],e=m/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*k);return kc(a)},cardinal:function(a,b){return 3>a.length?z(a):a[0]+na(a,ab(a,b))},"cardinal-open":function(a,b){return 4>a.length?z(a):a[1]+na(a.slice(1,a.length-1),ab(a,b))},"cardinal-closed":function(a,b){return 3>a.length?z(a):a[0]+na((a.push(a[0]),a),ab([a[a.length-2]].concat(a,[a[1]]),
b))},monotone:function(a){if(3>a.length)a=z(a);else{var b=a[0],c,d,e,f,g=[],h;c=0;h=a.length-1;for(var k=[],m=a[1],n=k[0]=cb(a[0],m);++c<h;)k[c]=(n+(n=cb(m,m=a[c+1])))/2;h=(k[c]=n,k);k=-1;for(m=a.length-1;++k<m;)c=cb(a[k],a[k+1]),1E-6>Math.abs(c)?h[k]=h[k+1]=0:(d=h[k]/c,e=h[k+1]/c,f=d*d+e*e,9<f&&(f=3*c/Math.sqrt(f),h[k]=f*d,h[k+1]=f*e));for(k=-1;++k<=m;)f=(a[Math.min(m,k+1)][0]-a[Math.max(0,k-1)][0])/(6*(1+h[k]*h[k])),g.push([f||0,h[k]*f||0]);a=b+na(a,g)}return a}});Ya.forEach(function(a,b){b.key=
a;b.closed=/-closed$/.test(a)});var lc=[0,2/3,1/3,0],mc=[0,1/3,2/3,0],N=[0,1/6,2/3,1/6];Za.reverse=$a;$a.reverse=Za;g.svg.area=function(){return md(C)};g.time={};var u=Date;R.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){F.setUTCDate.apply(this._,arguments)},setDay:function(){F.setUTCDay.apply(this._,arguments)},setFullYear:function(){F.setUTCFullYear.apply(this._,arguments)},setHours:function(){F.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){F.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){F.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){F.setUTCMonth.apply(this._,arguments)},setSeconds:function(){F.setUTCSeconds.apply(this._,arguments)},setTime:function(){F.setTime.apply(this._,arguments)}};var F=Date.prototype,nb="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ob="Sun Mon Tue Wed Thu Fri Sat".split(" "),pb="January February March April May June July August September October November December".split(" "),qb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");g.time.year=
S(function(a){return a=g.time.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});g.time.years=g.time.year.range;g.time.years.utc=g.time.year.utc.range;g.time.day=S(function(a){var b=new u(2E3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});g.time.days=g.time.day.range;g.time.days.utc=g.time.day.utc.range;g.time.dayOfYear=function(a){var b=g.time.year(a);
return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ").forEach(function(a,b){a=a.toLowerCase();b=7-b;var c=g.time[a]=S(function(a){return(a=g.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=g.time.year(a).getDay();return Math.floor((g.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});g.time[a+"s"]=c.range;g.time[a+"s"].utc=c.utc.range;
g.time[a+"OfYear"]=function(a){var c=g.time.year(a).getDay();return Math.floor((g.time.dayOfYear(a)+(c+b)%7)/7)}});g.time.week=g.time.sunday;g.time.weeks=g.time.sunday.range;g.time.weeks.utc=g.time.sunday.utc.range;g.time.weekOfYear=g.time.sundayOfYear;g.time.format=function(a){function b(b){for(var e,f,g,h=[],k=-1,m=0;++k<c;)37===a.charCodeAt(k)&&(h.push(a.substring(m,k)),null!=(f=Fd[e=a.charAt(++k)])&&(e=a.charAt(++k)),(g=ya[e])&&(e=g(b,null==f?"e"===e?" ":"0":f)),h.push(e),m=k+1);return h.push(a.substring(m,
k)),h.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(pa(c,a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=new u;return"j"in c?b.setFullYear(c.y,0,c.j):"w"in c&&("W"in c||"U"in c)?(b.setFullYear(c.y,0,1),b.setFullYear(c.y,0,"W"in c?(c.w+6)%7+7*c.W-(b.getDay()+5)%7:c.w+7*c.U-(b.getDay()+6)%7)):b.setFullYear(c.y,c.m,c.d),b.setHours(c.H,c.M,c.S,c.L),b},b.toString=function(){return a},b};var wc=qa(nb),Gd=ra(nb),xc=qa(ob),Hd=ra(ob),yc=qa(pb),Id=
ra(pb),zc=qa(qb),Jd=ra(qb),Ac=/^%/,Fd={"-":"",_:" ",0:"0"},ya={a:function(a){return ob[a.getDay()]},A:function(a){return nb[a.getDay()]},b:function(a){return qb[a.getMonth()]},B:function(a){return pb[a.getMonth()]},c:g.time.format("%a %b %e %X %Y"),d:function(a,b){return y(a.getDate(),b,2)},e:function(a,b){return y(a.getDate(),b,2)},H:function(a,b){return y(a.getHours(),b,2)},I:function(a,b){return y(a.getHours()%12||12,b,2)},j:function(a,b){return y(1+g.time.dayOfYear(a),b,3)},L:function(a,b){return y(a.getMilliseconds(),
b,3)},m:function(a,b){return y(a.getMonth()+1,b,2)},M:function(a,b){return y(a.getMinutes(),b,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,b){return y(a.getSeconds(),b,2)},U:function(a,b){return y(g.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return y(g.time.mondayOfYear(a),b,2)},x:g.time.format("%m/%d/%Y"),X:g.time.format("%H:%M:%S"),y:function(a,b){return y(a.getFullYear()%100,b,2)},Y:function(a,b){return y(a.getFullYear()%1E4,b,4)},Z:function(a){var b=
a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+y(c,"0",2)+y(b,"0",2)},"%":function(){return"%"}},nd={a:function(a,b,c){xc.lastIndex=0;return(b=xc.exec(b.substring(c)))?(a.w=Hd.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){wc.lastIndex=0;return(b=wc.exec(b.substring(c)))?(a.w=Gd.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){zc.lastIndex=0;return(b=zc.exec(b.substring(c)))?(a.m=Jd.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,
b,c){yc.lastIndex=0;return(b=yc.exec(b.substring(c)))?(a.m=Id.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return pa(a,ya.c.toString(),b,c)},d:nc,e:nc,H:oc,I:oc,j:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1},L:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){q.lastIndex=
0;return(b=q.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=Kd.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},U:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1},w:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1},W:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c)))?
(a.W=+b[0],c+b[0].length):-1},x:function(a,b,c){return pa(a,ya.x.toString(),b,c)},X:function(a,b,c){return pa(a,ya.X.toString(),b,c)},y:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1},Y:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1},"%":function(a,b,c){Ac.lastIndex=0;return(a=Ac.exec(b.substring(c,c+1)))?c+a[0].length:-1}},q=/^\s*\d+/,Kd=g.map({am:0,pm:1});g.time.format.utc=function(a){function b(a){try{u=
R;var b=new u;return b._=a,c(b)}finally{u=Date}}var c=g.time.format(a);return b.parse=function(a){try{u=R;var b=c.parse(a);return b&&b._}finally{u=Date}},b.toString=c.toString,b};var Bc=g.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");g.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?db:Bc;db.parse=function(a){a=new Date(a);return isNaN(a)?null:a};db.toString=Bc.toString;g.time.second=S(function(a){return new u(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+
1E3*Math.floor(b))},function(a){return a.getSeconds()});g.time.seconds=g.time.second.range;g.time.seconds.utc=g.time.second.utc.range;g.time.minute=S(function(a){return new u(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});g.time.minutes=g.time.minute.range;g.time.minutes.utc=g.time.minute.utc.range;g.time.hour=S(function(a){var b=a.getTimezoneOffset()/60;return new u(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+
36E5*Math.floor(b))},function(a){return a.getHours()});g.time.hours=g.time.hour.range;g.time.hours.utc=g.time.hour.utc.range;g.time.month=S(function(a){return a=g.time.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});g.time.months=g.time.month.range;g.time.months.utc=g.time.month.utc.range;var sa=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],rb=[[g.time.second,1],[g.time.second,5],[g.time.second,
15],[g.time.second,30],[g.time.minute,1],[g.time.minute,5],[g.time.minute,15],[g.time.minute,30],[g.time.hour,1],[g.time.hour,3],[g.time.hour,6],[g.time.hour,12],[g.time.day,1],[g.time.day,2],[g.time.week,1],[g.time.month,1],[g.time.month,3],[g.time.year,1]],Ld=[[g.time.format("%Y"),ma],[g.time.format("%B"),function(a){return a.getMonth()}],[g.time.format("%b %d"),function(a){return 1!=a.getDate()}],[g.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[g.time.format("%I %p"),function(a){return a.getHours()}],
[g.time.format("%I:%M"),function(a){return a.getMinutes()}],[g.time.format(":%S"),function(a){return a.getSeconds()}],[g.time.format(".%L"),function(a){return a.getMilliseconds()}]],Cc=g.scale.linear(),Md=pc(Ld);rb.year=function(a,b){return Cc.domain(a.map(od)).ticks(b).map(gb)};g.time.scale=function(){return eb(g.scale.linear(),rb,Md)};var Dc=rb.map(function(a){return[a[0].utc,a[1]]}),Nd=[[g.time.format.utc("%Y"),ma],[g.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[g.time.format.utc("%b %d"),
function(a){return 1!=a.getUTCDate()}],[g.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[g.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[g.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[g.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[g.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Od=pc(Nd);return Dc.year=function(a,b){return Cc.domain(a.map(pd)).ticks(b).map(hb)},g.time.scale.utc=function(){return eb(g.scale.linear(),
Dc,Od)},g}();
;
(function(g){var f=persist("ABTest",{expires:30});"localstorage"===window.Persist.type&&(FTB.ABTest=function(k){var b={},l=function(a){for(var b=0,c=0,d;d=a[c];++c){if(!d.weight)throw"Weight must be defined for each AB Test";b+=d.weight}return $.map(a,function(a){return{percent:a.weight/b,label:a.label}})},e=function(a){if(!0===a){a:{a=l(b.p.tests);for(var h=Math.random(),c=0,d=0,e=a.length;d<e;d++){if(h>c&&h<a[d].percent+c){a=a[d].label;break a}c+=a[d].percent}a=void 0}return a?(b.tag=a,f.set(b.p.id,
b.tag),b.tag):g}if(a===g)return f.get(b.p.id);b.tag=a;f.set(b.p.id,b.tag);return a};(function(){b.p=$.extend({},k);var a=e();a||(a=e(!0));b.tag=a})();return{tag:e,log:function(a,e){var c={action:a,time_on_page:time_on_site(),desc:b.p.id+":"+b.tag};if(b.p.pass&&-1===$.inArray(a,b.p.pass))return!1;$.extend(!0,c,e);("true"===GET().debug||b.p.debug)&&FTB.IS_EMPLOYEE?console.log("The following data will be sent to Kibana:",c):FTB.Analytics.send_data("ab_test",c);return!0},reset:function(){f.remove(b.p.id);
delete b.tag}}})})();
;
(function(){var e=window.show_smart_rating,c,g=$(".compare-sr-cta"),a=$(".compare-sr-msg-wrap"),f=function(){a.addClass("opening");setTimeout(function(){d(tt("Hide"));a.removeClass("opening").addClass("opened")},500)},h=function(){a.addClass("opening").removeClass("opened");setTimeout(function(){d(tt("Show the Smart Rating breakdown again"));a.removeClass("opening")},500)},d=function(a){g.text(a)},k=function(){var b=$('<div class="new-sr v2 no-txt clearfix">');a.append(b);viz.ApplePieChart(b,this.apc_data,
{radius:150,radius_growth:20,width:a.width()});applyTips(b)};$d.on("click",".compare-sr-cta",function(b){c?a.hasClass("opened")?h():f():(d(tt("Loading...")),EVT(["Side-by-side Page","Row Actions","Smart Rating",void 0,!1]),e(b,{cb:function(a){c=new e.SmartRatingMSG(a);c.format_data();k.call(c);f()}}))})})();
;
(function(g){function v(a){this.$=a;this.cxt=a.data("afl-cxt")>>0;this.mid=a.data("afl-id");this.data=w[this.mid];this.mh=this.cxt===u;this.color=(this.small=this.cxt===x||this.cxt===y||this.mh)||"FindTheBest"!==m.net_name?z:A}function n(a,b,e){var d,c,k;for(d=0;d<a.length;d++)if(c=a[d],c.h){if(b){k=e(c,d,a);if(!1===k)return!1;-1===k&&d--}if(c.c.length&&(k=n(c.c,b,e),!1===k))return!1}else{k=e(c,d,a);if(!1===k)return!1;-1===k&&d--}}function B(a){_gaq.push(["_trackEvent","SRP","Buy Now Button"]);return go_soon(this,
a)}var x=2,y=3,u=4,z="bg-blue",A="bg-orange",m=g.FTB||{},w=m.afl=m.afl||{},r=$(document),s=$("body").hasClass("widget"),p,q,f,l,t,h=v.prototype;h.init=function(){this.$.data("afl-init",1);this.small?this.bind_trigger():this.render();this.mh&&this.mh_init()};h.mh_init=function(){var a=this,b,e=$(".buy-center");e.length&&(q=function(){var a=$(this).hasClass("afl-bclink")?"'Explore all price options'":"Widget";EVT(["Detail Page","Main Header Pricing Widget","To buying center: "+a,time_on_site(),!1]);
e.addClass("open");m.go_to(e,-50,!1,500)});b=a.$.find(".mhprice-wrap").addClass(m.page_type);if(!a.data)if(b=a.$.find(".mhprice-box").addClass("mhprice-empty"),q)b.addClass("has-bc").click(q);else{a.$.closest(".mhprice-wrap").addClass("no-data");return}if("detail"===m.page_type){var d=!1,c=$("#detail-sections").offset().top-25,k=$(".detail-info-title"),f=$(".mhprice-wrap"),h=$("#detail-float .section-summary").after('<div id="buy-center-nav" class="section-nav float-btn-right"></div>').next();$(g).scroll(function(){var b=
$(g).scrollTop();!d&&b>c?(h.append(f),d=!0):d&&b<c&&(k.append(f),d=!1);a.pop_hide()});resize_debounce(function(){c=$("#detail-sections").offset().top-25;a.pop_hide()});a.$.closest(".mhprice-wrap").removeClass("loading")}};h.render=function(){var a=this,b=a.data,e;if(!(b&&b.length||a.small))return a.error();n(b,!1,function(b){if(b.ajax)return a.request_data(),e=!0,!1});e||(a.ready=!0);a.small?(a.pop_show(),a.ready&&a.flash()):a.$.html(a.get_html());e&&(a.small?f:a.$).find(".spin").spin({color:"#999",
length:4,width:2,radius:6})};h.update=function(a){var b;a&&(n(this.data,!1,function(b,d,c){var f;if(b.ajax)if((f=a["i"+b.ajax.i])&&f.length)delete b.ajax,$.each(f,function(a,c){$.extend(c,b)}),d=c.slice(0,d).concat(f).concat(c.slice(d+1)),c.splice.apply(c,[0,100].concat(d));else return c.splice(d,1),-1}),n(this.data,!0,function(a,d,c){if(a.h&&!a.c.length)return c.splice(d,1),-1;a.fb&&(b=a.fb)}),1===this.data.length&&b&&(this.fallback=b));this.render()};h.flash=function(){if(g.format_number){var a=
this.$.find(".afl-lst"),b=/(\$|\,)/g,e,d;a.length&&(e=parseInt(a.html().replace(b,""),10),n(this.data,!1,function(a){a.prc&&(a=a.prc.replace(b,""),$.isNumeric(a)&&(a=Math.ceil(parseFloat(a,10)),d=!d||0<a&&a<d?a:d))}),d&&d!==e&&(a.addClass("flash-"+(d>e?"red":"green")).text("$"+g.format_number(d,"0,000")),setTimeout(function(){a.addClass("flash-fade")},100)))}};h.error=function(){if(g.detail&&g.detail.remove_component)g.detail.remove_component(this.$.find(".afl-loading").closest(".component"));else if(1===
this.cxt){var a=this.$.find(".afl-loading").closest(".component"),b=a.closest(".sb-item");(1===b.find(".component").length?b:a).remove()}};h.get_offer_html=function(a){var b,e=this.color,d=a.url;a.prc&&"0.00"===a.prc&&(a.prc=null);10<(a.btn||"").length&&(e+=" afl-small-btn");b=a.prc&&/^[,\.\d]+$/.test(a.prc)?"$"+a.prc+"<small>+ tax &amp; shipping</small>":'<small class="afl-ret">'+(a.prc?a.prc:"See retailer<br/>for pricing")+"</small>";a.inter&&(d="/inter?&url="+encodeURIComponent(d)+"&domain="+encodeURIComponent(a.ret));
return'<tr class="afl-offer'+(a.feat?" bg_grad afl-feature":"")+'"><td><a href="'+d+'" target="_blank" class="purchase_button afl-retailer" rel="nofollow">'+(a.img?'<img src="'+a.img+'" alt="'+a.ret+'"/>':"<span>"+a.ret+"</span>")+(a.feat?"<small>Featured Seller</small>":"")+'</a></td><td><span class="afl-price">'+b+'</span></td><td><a href="'+d+'" class="purchase_button stnd-btn '+e+'" target="_blank" rel="nofollow">'+(a.btn?a.btn:"Buy")+"</a></td></tr>"};h.get_html=function(){var a=this,b=a.data,
e=[],d=0,c;a.ready&&b&&b.length&&!a.fallback?(c='<table class="afl-table"><tbody>',n(b,!0,function(b){if(b.h)c+='<tr class="afl-header"><td colspan="3">'+b.h+"</td></tr>";else if(c+=a.get_offer_html(b),6<=++d)return!1}),c+="</tbody></table>",/amazon.com/i.test(c)&&e.push("Amazon"),/pgpartner.com/i.test(c)&&e.push('<a href="http://pricegrabber.com" target="_blank" rel="nofollow">PriceGrabber</a>'),e.length&&(c+='<div class="afl-footer">'+tt("Powered by")+" "+e.join(" and ")+"</div>"),a.mh&&q&&(c+=
'<div class="afl-bclink">'+tt("Explore all price options")+" &rsaquo;</div>")):c=a.ready&&a.fallback?a.fallback.replace("[url]",(b[0].c?b[0].c[0]:b[0]).url):a.ready?'<div class="afl-err">No Offers Available</div>':'<div class="afl-loading"><div class="loading"><div class="spin"/>Checking Prices...</div></div>';return a.small?g.is_mobile||s?'<div class="afl-mdl-bg"><div class="afl-mdl"><div class="afl-mdl-title">Available Offers<div class="afl-mdl-x"/></div>'+c+"</div></div>":'<div class="afl-pop shadow">'+
c+"</div>":c};h.request_data=function(){var a=this,b=[],e=0;n(a.data,!1,function(a){a.ajax&&(a.ajax.i=e++,b.unshift(a.ajax))});return $.ajax({type:"GET",url:"/ajax_pricing",data:{d:b},dataType:"json",timeout:1E4,success:function(b){a.update(b)},error:function(){a.update()}})};h.pop_center=function(){if(f)if(g.is_mobile||s){var a=f.children().first();a.css({top:Math.max((g.innerHeight-a.outerHeight())/2,0),left:Math.max((g.innerWidth-a.outerWidth())/2,0)})}else{var a=this.$.find(".afl-trigger"),b=
$(g).width(),e=a.offset().left,d=b-(e+a.width()),c={top:Math.floor(a.offset().top+a.outerHeight()+12)},b=100>e?"left":200>e&&200>d?"center":200>d?"right":this.cxt===u?767<b?"right":"center":"center";switch(b){case "left":c.left=Math.floor(a.offset().left);break;case "center":c.left=Math.floor(a.offset().left+(a.outerWidth()-f.outerWidth())/2);break;case "right":c.left=Math.floor(a.offset().left+(a.outerWidth()-f.outerWidth()))}f.addClass("afl-pop-"+b+"-align"+(this.cxt===u?" mhprice":"")).css(c)}};
h.pop_show=function(){var a=this;a.pop_hide();f=$(a.get_html()).appendTo("body");a.pop_bind();a.pop_center();l=1;r.on("vclick.afl",function(b){f&&!$(b.target).closest(".afl-table").length&&(l=0,a.pop_hide())});a.mh&&$.isFunction(q)&&(r.off("click",".afl-bclink"),r.one("click",".afl-bclink",q))};h.pop_hide=function(){f&&(f.fadeOut(function(){$(this).remove()}),f=null,r.off("click.afl"))};h.pop_bind=function(){if(f){var a=this;if(g.is_mobile||s)f.on("click",function(b){/afl-mdl-(x|bg)/.test(b.target.className)&&
(l=0,a.pop_hide())});else f.hover(function(){l=1},function(){l=0;setTimeout(function(){l||a.pop_hide()},250)});f.find(".afl-pop img").error(function(){var a=$(this).attr("alt")||"Retailer";$(this).parent().html("<span>"+a+"</span>")})}};h.bind_trigger=function(){var a=this;a.$.find(".afl-trigger").click(function(b){p&&600>_.now()-p?p=0:(f?(l=0,a.pop_hide()):a.render(),b.stopPropagation())}).hover(function(){if(g.is_mobile||s)return!1;f||(p=_.now());setTimeout(function(){p&&a.render()},50)},function(){if(g.is_mobile||
s)return!1;l=p=0;setTimeout(function(){l||a.pop_hide()},250)});a.$.find(".afl-mh.afl-trigger").one("mouseenter",function(b){var e=$(this).closest("#buy-center-nav").length?"nav bar":"header";EVT(["Detail Page","Main Header Pricing Widget","On "+e,time_on_site(),!1]);f?(l=0,a.pop_hide()):a.render();b.stopPropagation()})};t=_.throttle(function(){$(".afl-wrap").each(function(){var a=$(this);a.data("afl-init")||(new v(a)).init()})},100);$(function(){"srp"===m.page_type&&($.subscribe("srp/ready",t),r.on("click",
".afl-pop .purchase_button",B));$.subscribe("widget/srp",t);$.subscribe("lazy_render",t);setTimeout(t,1)})})(window);
;
(function(b){b.inter_click=function(a){a.href&&-1===a.href.indexOf("/inter?")&&(a.href="/inter?url="+encodeURIComponent(a.href)+"&domain=auto");return!0}})(window);
;
(function(a,g,h){var c=!1,f;a.load_fb_js=function(a){c?a&&a():(c=!0,$.getScript("//connect.facebook.net/en_US/all.js",function(){f(a)}))};f=function(d){FB.init({appId:FTB.fb_app_id,status:!0,cookie:!0,xfbml:!0,channelUrl:"http://"+a.location.hostname+"/channel.html"});FB.getLoginStatus(function(){d&&d()})};a.fb_connect=function(d){"connected"!==FB._userStatus&&"undefined"!==typeof FB._userStatus||FB.api("/me",function(b){b.error?alert("Facebook Error: "+b.error.message):$.get("/ajax_fb_connect",{sid:b.id,
e:b.email,n:b.name,fn:b.first_name,ln:b.last_name,loc:b.location,work:b.work},function(b){if("ok"!==b.status)alert(b.msg);else if(a.FTB.social_registration=b.is_registration,_gaq.push(["_setCustomVar",1,"Registered","Yes",1]),_gaq.push(["_setCustomVar",2,"Logged In","Yes",2]),a.loginBox?a.loginBox.hide():BOX.hide(),d)d.call(void 0);else{var e=null,c=location.host.match(/\.?([^.]+)\.[^.]+.?$/);null!==c&&(e=c[0]);g.cookie="redir_to=; path=/"+(null!==e?"; domain="+e:"");0<b.redir.length?a.location.href=
b.redir:0===a.location.pathname.indexOf("/user")?a.location.href="http://"+a.location.host:a.location.reload()}},"json")})}})(window,document,"script");
;
(function(f,e){var g=function(){},h=f.getElementsByTagName("head")[0].appendChild(f.createElement("style")).sheet;g.prototype={destroy:function(){(this.o.on_close||e.noop)();this.$bb.remove()},slide_then_destroy:function(){var a=this;a.$bb.slideToggle(function(){a.destroy.apply(a)})},bind_clicks:function(){var a=this,c=e(f),d=function(b){if(!e(b.target).closest(".bota-outer").length)a.destroy.apply(a);else if(a.o.closeOnBody)c.one("click",d)};c.one("click",".bota-X",function(){a.o.no_slide?a.destroy.apply(a):
a.slide_then_destroy.apply(a)});e(window).one("resize",d);if(a.o.closeOnBody)c.one("click",d)},get_outer_box:function(a){return'<div class="bota-outer thm-bt thm-abb thm-arrow-up"><div class="bota-X">&times;</div><div class="bota-inner">'+a+"</div></div>"},set_position:function(a){var c=e.extend(this.$el.offset(),{height:this.$el.outerHeight(),width:this.$el.outerWidth()}),d=e(window).width(),b=768>d,f=(this.o.$body||e("body")).height();a={display:a?"block":"none",top:c.top+c.height+8};var g=this.o.hest||
this.$bb.height()||300,k=this.$bb.width();this.f=f<a.top+g;h.cssRules.length&&h.deleteRule(0);this.f&&!this.o.noflip&&(a.top=c.top-g-8,this.$bb.addClass("flip thm-bb thm-arrow-down thm-abt").removeClass("thm-bt thm-arrow-up thm-abb"));b?(a.width=this.o.width||d-30,a.left=(d-a.width)/2,c="left: "+(c.left+c.width/2-a.left)+"px"):(d-=k,b=c.left-d,b=(0<b?b:0)+c.width/2,a.left=Math.min(d,c.left),a.width=this.o.width||"auto",c="left: "+b+"px");h.insertRule?h.insertRule(".bota-outer:after{"+c+"}",0):h.addRule(".bota-outer:after",
c,0);a.top+=this.o.offset||0;this.o.$body&&(a.top-=this.o.$body.offset().top);this.$bb.css(a)},fill_html:function(a){this.o.delay=!1;this.$bb.find(".bota-inner").spin(!1).html(a);this.set_position(!0)}};window.botaBOX=function(a,c,d){var b=new g,f=d.$body||e("body");b.o=d||{};b.$el=e(c);b.$bb=e(b.get_outer_box(a));f.append(b.$bb);b.set_position(d.no_slide);d.no_slide?(b.o.DOMReady||e.noop)():b.$bb.slideToggle(function(){(b.o.DOMReady||e.noop)();b.o.delay&&b.$bb.find(".bota-inner").spin({lines:9,width:6,
radius:8,length:3,color:"#888"});b.set_position(!0)});setTimeout(function(){b.bind_clicks()},1);return b}})(document,jQuery);
;
$(function(){function g(){var a,b=[];for(a=0;a<compare.items.length;a++)b.push(compare.items[a].id);return b}function k(a){var b=function(){$.dialog("Error","Something seems to be wrong - please try again later.")};$.ajax({url:"/ajax_compare_vote",data:a,dataType:"json",success:function(a){if("ok"!==a.status)b();else{if(a.results_html){var c=a.results_html,e=a.results_message,f=compare.get_order(),d,h=Object.keys(c),g=h.length;for(d=0;d<g;d+=1)l.find(".cell").eq(f.indexOf(h[d])).html(c[h[d]]);m.html(e)}a.vote_id&&
n(a.vote_id)}},error:b})}function n(a){e=!1;f.find(".c-vote-btn").quickEach(function(){+compare.get_info(this.closest(".cell")).id===+a?(this.addClass("selected").find(".label").text("Your Choice"),e=!0):this.removeClass("selected").find(".label").text("Vote")})}var c={},f=$("#c-vote-buttons"),l=$("#c-vote-percent"),m=$("#c-vote-title"),e=!!f.find(".c-vote-btn.selected").length;c.vote=function(a){k({method:e?"update":"create",listing_ids:g().join(","),vote_id:a})};c.remove=function(){k({method:"delete",
listing_ids:g().join(",")})};f.on("click",".c-vote-btn",function(){var a=$(this),b=compare.get_info(a.closest(".cell")).id;a.hasClass("selected")||(EVT(["Side-by-side Page","Compare Vote","Voted",void 0,!1]),c.vote(b))});return c});
;
(function(d){function s(a){var b=a.parent();a.show();window.loginBox=BOX.show({w:a.outerWidth(),html:a,onclose:function(){b.append(a.hide());(c.on_login_close||d.noop)()}})}function t(){e.login_type="facebook";(function b(){window.FB?FB.login(function(b){"connected"===b.status&&window.fb_connect(function(){h(c.social_registration,function(){c.social_registration&&l()})})},{scope:c.fb_scope}):setTimeout(b,50)})()}function n(){if(!p.closed)return setTimeout(n,500);c&&c.is_logged_in&&(_gaq.push(["_trackEvent",
"Google Login","Successful"]),window.loginBox?window.loginBox.hide():BOX.hide(),h(c.social_registration,function(){c.social_registration&&l()}))}function u(a){d.ajax({cache:!1,url:"/ajax_current_user",complete:function(b){c.user.uid=JSON.parse(b.responseText).uid;a.call(void 0)}})}function h(a,b){var d=function(){u(function(){e.callback&&e.callback.call(void 0);b&&b.call(void 0);e.redirect&&"/home"!==e.redirect&&"#"!==e.redirect?window.location.href=e.redirect:e.callback||a||window.location.reload()})};
c.Analytics?c.Analytics.send_data("users",{action:e.action,page_type:c.page_type,purpose:e.purpose,login_type:e.login_type,page_url:window.location.href,app_id:c.app_id,title:c.app_name,date:new Date},{complete:function(){setTimeout(d,c.login_delay)}}):setTimeout(d,c.login_delay)}function v(a){a.status?(BOX.hide(),e.action="register",h(!0,l)):(m(f,a.messages_error),window.Recaptcha.reload())}function w(){var a=f.find(".username-error");d.get("/ajax_valid_username",{username:d(this).val(),r:Math.random()}).done(function(b){a.toggleClass("active",
!b.is_valid)})}function x(){var a=f.find(".mail-error");d.get("/ajax_valid_email",{email:d(this).val(),r:Math.random()}).done(function(b){b=JSON.parse(b);a.toggleClass("active",!b.is_valid)})}function y(){d.err();EVT(["User Login","Registration Form","Error Submitting",0,!1])}function z(){k(!1)}function A(a){var b=f.find("#edit-pass"),c=f.find("#edit-mail");f.find(".mail-error").toggleClass("active",""===c.val());f.find(".password-error").toggleClass("active",6>b.val().length);if(d(".username-error.active").length||
d(".password-error.active").length||d(".mail-error.active").length)return d(".username-error, .password-error, .mail-error").css("color","red"),!1;f.removeClass("tc-error");window.cleanup_placeholders();k(!0);cancelEvent(a);d.post("/user_register_form?purpose="+e.purpose,q(f),null,"json").done(v).fail(y).always(z)}function l(){d.getJSON("/ajax_thank_you?purpose="+e.purpose,function(a){a&&a.msg&&(window.loginBox&&window.loginBox.hide(),BOX.hide(),MSG('<span class="thm-text" id="close">&times;</span><h2>'+
a.msg+"</h2>","reg-white",-1,"middle",function(){var b=window.location.href,a=Math.floor(5E6*Math.random()),b=-1!==b.indexOf("?")?b+("&rnd="+a):b+("?rnd="+a);window.location.href=b}))})}function B(a){!0===a.status?(BOX.hide(),h()):m(g,a.messages_error)}function C(){d.err();EVT(["User Login","Login Form","Error Submitting",0,!1])}function r(){k(!1)}function D(a){cancelEvent(a);g=d(this).closest("form");k(!0);if(a=q(g))d.post(window.location,a,null,"json").done(B).fail(C).always(r);else{var b="";g.find(".required").each(function(){this.value||
(b+=this.id+", #")});b=b.substring(0,b.length-3);m(g,[{id:b,value:"Must provide email and password."}]);r()}}function m(a,b){a.find(".messages").remove();a.find(".error").removeClass("error");if(b){for(var c=d("<div>").addClass("messages").addClass("error"),e=0;e<b.length;e++){var f=b[e];a.find("#"+f.id).addClass("error");c.append(f.value+"<br/>")}a.prepend(c)}}function q(a){var b={drupal_ajax:1};a.find("input").each(function(){-1<this.className.indexOf("required")&&!this.value&&(b=!1);b&&(b[this.name]=
this.value)});return b}function k(a){var b=d(".login-loading").toggleClass("active",a);!1===a?setTimeout(function(){b.hide().spin()},200):b.show().spin()}var c=window.FTB=window.FTB||{},g,f,p,e={callback:null,purpose:"manual",redirect:null,login_type:"ftb",action:"login"};c.show_login=function(a,b,c,f){c&&(e.callback=c);f&&(e.purpose=f.replace(/-/g,"_"));window.set_cookie("login_purpose",e.purpose);load_fb_js();c=d(".popup_login_box");c.length&&(c.find("#edit-dest").val(a),b&&c.find("#login-message").html(b).css("display",
"block"),s(c))};c.perform_login=function(a,b){switch(a){case "local":local_login_ajax();break;case "google":e.login_type="google";p=window.open(b,"windowname1","width=450, height=500");n();break;case "facebook":t()}};c.show_registration=function(){window.set_cookie("login_purpose",e.purpose);c.get_session();window.load_fb_js();d.getJSON("/user_register_form?purpose="+e.purpose,function(a){a&&a.html&&(window.loginBox&&window.loginBox.hide(),BOX.hide(),BOX.show({html:a.html,top:100,fixed:!0}),f=d("#user-register-small-form"),
f.css({maxHeight:d(window).height()-150,overflowY:"auto",overflowX:"hidden"}),d.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){window.Recaptcha.create("6LcnndkSAAAAAF6T5tAX6Avv9VY-jLaAS82IAaeg","recaptcha_node",{theme:"custom",tabindex:4})}),window.setup_placeholders(),f.find("#edit-pass").on("keyup",function(){f.find(".password-error").toggleClass("active",6>d(this).val().length)}),f.find("#edit-name").on("change",w),f.find("#edit-mail").on("change",x))})};d(function(){d(document).on("click",
"#user-login-small-form .form-submit",D).on("click","#user-register-small-form .form-submit",A);load_fb_js();"true"===GET().prompt_login&&c.show_login(void 0,"Get more out of your experience by logging in now.",void 0,"page_load_prompt")})})(jQuery);
;
(function(a){window.create_account_form=function(){FTB.show_registration()};a(document).on("click",".fb_login_button",function(){FTB.perform_login("facebook")}).on("focus","#edit-name",function(){var b=a("#recaptcha_node, .terms").show();setTimeout(function(){b.addClass("open")},1)});a(a(".popup_login_dlg").click(function(b){b.preventDefault();FTB.show_login(a(this).attr("href")||"",void 0,void 0,a(this).attr("id"));return!1}))})(jQuery);
;
(function(b){var h=b("html"),f=b("#p-nav-menu-wrap"),g=b("#p-nav-menu-tog"),c=get_gaq_page_type(),k=!1,d=!1,e,l=function(){$d.one("vclick",function(a){d&&0===b(a.target).closest("#p-nav-menu-wrap").length?(h.toggleClass("menu-open"),g.removeClass("active"),f.hide(),d=!1):d&&l()})},p=function(a){var c=b("body");c.css("cursor","progress");b.getJSON("/ajax_get_flyout_menu",function(b){c.css("cursor","");f.html(b.html);h.toggleClass("menu-open");g.addClass("active");f.show();d=!0;n();a&&m(a);k=!0})},
m=function(a){a&&(b("#p-nav-menu-wrap .pn-cat-link").removeClass("active"),b("#p-nav-menu-wrap .cat-nav-"+a+" .pn-cat-link").addClass("active"),b(".pn-cat-sec").css("display","none"),b("#pn-pop-cat-"+a).css("display","block"),EVT([c,"Flyout menu","Moused over Categories in menu to view it",0,!1]))},n=function(){$d.on("vclick","#p-nav-menu-close",function(){f.hide();d=!1;g.removeClass("active");EVT([c,"Flyout menu","Clicked on [x] to close menu",0,!1])}).on("vclick","#pn-cat-list li",function(){var a=
b(this).find(".pn-cat-link").text().trim();EVT([c,"Flyout menu","Clicked on category - "+a,0,!1])}).on("vclick",".pn-popular-link",function(){EVT([c,"Flyout menu","Clicked on Popular topic",0,!1])}).on("vclick",".pn-subcat-link",function(){EVT([c,"Flyout menu","Clicked on Subcategory",0,!1])}).on("vclick",".pn-show-all",function(){EVT([c,"Flyout menu","Clicked on Show all (Category Page link)",0,!1])}).on("vclick",".my-account-menu-m",function(){EVT([c,"Flyout menu","Clicked on User Profile - Mobile",
0,!1])}).on("vclick","#p-account-list-m .profile-edit-m",function(){EVT([c,"Flyout menu","Clicked on Profile Setting - Mobile",0,!1])}).on("vclick","#p-account-list-m .logout-m",function(){EVT([c,"Flyout menu","Clicked on Profile logout - Mobile",0,!1])});b("#pn-cat-list li").on("mouseover",function(){var a=b(this).attr("class"),c=(a=a?a.split("-"):[])?a[2]:void 0;e&&(clearTimeout(e),e=null);e=setTimeout(function(){m(c)},50)})};$d.on("vclick","#p-nav-menu-tog, #mob-menu-tog",function(a){if(gatekeeper("Flyout Nav")){var e=
b(this).data("cat")||void 0;!1===k?(p(e),d=!0):(h.toggleClass("menu-open"),g.toggleClass("active"),f.toggle(),d=!d);d?(l(),EVT([c,"Flyout menu","Clicked on Menu - Open",0,!1])):EVT([c,"Flyout menu","Clicked on Menu - Close",0,!1]);cancelEvent(a)}})})(jQuery);
;
(function(){var a=FTB.CBG.current;a&&($("body").addClass("cbg"),gatekeeper("CBG changes")?set_cookie("_ftb_cbg",a.pid,24):set_cookie("_ftb_cbg",a.pid,24,!0))})();
;
(function(b){var a=b.FTB||{};a.track_gmaps=function(c){a.Analytics&&a.Analytics.send_data("gmaps",{page_type:a.page_type||"other",page_url:b.location.href,title:c})}})(window);
;
(function(d){(function(){FTB.lazy("helpful",function(){var a,c,b;FTB.question_data.popup&&window.scroll_popup&&window.scroll_popup(FTB.question_data.html);a=d("#helpful-page-wrapper");c=[{choice:"yes",div:a.find(".helpful-yes")},{choice:"no",div:a.find(".helpful-no")}];b=a.find(".grid-wrap");"detail"!==FTB.page_type||b.length||(b=a);FTB.question(c,b,{classname:"help-q",skip:"1"===FTB.question_data.skip_yes_no_question?+FTB.question_data.id:!1})})})()})(jQuery);
;
(function(){var d,e=FTB.test.scripts,a=FTB.test.onload,b=[];FTB.test={run:function(a,f){FTB.lazy("jstest",function(){if(d===FTB.test)throw"Cannot load tests";for(var c=0,g=b.length;c<g;c++)FTB.test.register.apply(this,b[c]);FTB.test.scripts=e;FTB.test.run(a,f)})},register:function(){b.push(arguments)}};d=FTB.test;a&&FTB.test.run(a)})();
;
